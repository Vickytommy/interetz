{% load filters %}
{% include 'super_admin/partials/main.html' %}
{% include 'super_admin/partials/title-meta.html' with title=client_data|get:"Edit Client Details" %}
<head>

    {% load static %}
    {% include 'super_admin/partials/head-css.html' %}
    <!-- Custom Nav Styles -->
    <link href="{% static 'super_admin/assets/css/custom-nav.css' %}" rel="stylesheet" type="text/css" />

</head>

{% include 'super_admin/partials/body.html' %}
<div class="group-data-[sidebar-size=sm]:min-h-[1500px] group-data-[sidebar-size=sm]:relative">

    {% include 'super_admin/partials/sidebar.html' %}
    {% include 'super_admin/partials/topbar.html' %}


    <!-- ============================================================== -->
    <!-- Start right Content here -->
    <!-- ============================================================== -->
    <div class="relative min-h-screen group-data-[sidebar-size=sm]:min-h-[1500px]">

        <div class="group-data-[sidebar-size=lg]:ltr:lg:ml-vertical-menu group-data-[sidebar-size=lg]:rtl:lg:mr-vertical-menu group-data-[sidebar-size=md]:ltr:ml-vertical-menu-md group-data-[sidebar-size=md]:rtl:mr-vertical-menu-md group-data-[sidebar-size=sm]:ltr:lg:ml-vertical-menu-sm group-data-[sidebar-size=sm]:lg:rtl:mr-vertical-menu-sm pt-[calc(theme('spacing.header')_*_1)] pb-[calc(theme('spacing.header')_*_1)] px-6 group-data-[layout=horizontal]:!mx-auto group-data-[layout=horizontal]:max-w-screen-2xl  group-data-[layout=horizontal]:lg:pt-[calc(theme('spacing.header')_*_1.75)] ">
            <div class="container-fluid">

                {% include 'super_admin/partials/page-title.html' with title=request.session|get:"Clients" pagetitle=client_data|get:"Edit Client Details" %}

                <a href="{% url 'super_admin:viewClients' %}" class="mb-4 text-white transition-all duration-300 ease-linear bg-green-500 border-green-500 hover:bg-green-600 hover:border-green-600 hover:text-white active:bg-green-600 active:border-green-600 active:text-white focus:bg-green-600 focus:border-green-600 focus:text-white focus:ring focus:ring-green-500/30 btn">{{ client_data|get:"view all clients" }}</a>

                <div class="grid grid-cols-1">
                    
                    <div class="card dark:border-zink-50 dark:bg-zink-700">
                            <div class="card-body">
                                <h6 class="font-semibold text-16 mb-5">{{client_data|get:"Edit Client Details"}}</h6>

                                <form method="POST" id="edit_user_form" class ="{% url 'super_admin:addClient' %}">
                                	<input type="hidden" name="entry_type" id="entry_type" value="single">

                                    <div id="info_selector"></div>
                                	{% csrf_token %}
	                                <div class="grid grid-cols-12 gap-5">
	                                	<div class="col-span-12 lg:col-span-6">
	                                		<div>

			                                    <div>
			                                        <label for="example-text-input" class="block font-medium text-gray-700 mb-2 text-13 dark:text-zink-200">{{ data_table|get:"company name" }}</label>
			                                        <input class="w-full border py-2 px-3 text-13 rounded border-gray-400 placeholder:text-13 focus:border focus:border-gray-400 focus:ring-0 focus:outline-none text-gray-700 dark:bg-transparent placeholder:text-gray-600 dark:border-zink-50 dark:placeholder:text-zink-200" type="text" id="company_name"  name="company_name" required value="{{ client.company_name }}">
			                                    </div>

			                                    <div>
			                                        <label for="example-text-input" class="block font-medium text-gray-700 mt-2 text-13 dark:text-zink-200">{{data|get:"Company ID"}}</label>
			                                        <input class="w-full border py-2 px-3 text-13 rounded border-gray-400 placeholder:text-13 focus:border focus:border-gray-400 focus:ring-0 focus:outline-none text-gray-700 dark:bg-transparent placeholder:text-gray-600 dark:border-zink-50 dark:placeholder:text-zink-200" type="text" id="company_id"  name="company_id" required value="{{ client.company_id }}">
			                                    </div>


			                                    <!-- <div>
			                                        <label for="example-text-input" class="block font-medium text-gray-700 mt-2 text-13 dark:text-zink-200">Employee ID</label>
			                                        <input class="w-full border py-2 px-3 text-13 rounded border-gray-400 placeholder:text-13 focus:border focus:border-gray-400 focus:ring-0 focus:outline-none text-gray-700 dark:bg-transparent placeholder:text-gray-600 dark:border-zink-50 dark:placeholder:text-zink-200" type="text" id="employee_id"  name="employee_id" value="{{ client.id }}" required disabled>
			                                    </div> -->


			                                     <div>
			                                        <label for="example-text-input" class="block font-medium text-gray-700 mt-2 text-13 dark:text-zink-200">{{data|get:"Employee Name"}}</label>
			                                        <input class="w-full border py-2 px-3 text-13 rounded border-gray-400 placeholder:text-13 focus:border focus:border-gray-400 focus:ring-0 focus:outline-none text-gray-700 dark:bg-transparent placeholder:text-gray-600 dark:border-zink-50 dark:placeholder:text-zink-200" type="text" id="employee_name"  name="employee_name" value="{{ client.employee_name }}" required>
			                                    </div>
			                                       <div class="relative">
												    <label for="employee_password" class="block font-medium text-gray-700 mt-2 text-sm dark:text-zink-200">{{login_data|get:"password"}}</label>
												    <div class="flex items-center">
												        <input class="w-full border py-2 px-3 text-sm rounded border-gray-400 placeholder-text-sm focus:border focus:border-gray-400 focus:ring-0 focus:outline-none text-gray-700 dark:bg-transparent placeholder-text-gray-600 dark:border-zink-50 dark:placeholder-text-zink-200" type="text"  id="employee_password" name="employee_password"  value="{{ client.plain_password }}" required>
												        <button type="button" class="text-blue-500 transition-all duration-300 ease-linear bg-white border-blue-500 focus:text-white focus:ring focus:ring-blue-500/30 hover:bg-blue-600 hover:border-blue-600 hover:text-white active:bg-blue-600 active:border-blue-600 active:text-white dark:bg-transparent focus:bg-blue-500 focus:border-blue-600 btn" type="button" onclick="generatePassword()" >
												            <!-- Tailwind CSS icon for a key -->
												            <i class=" block text-[14px]  dripicons-clockwise"></i>
												        </button>
												    </div>
												</div>



			                                    
			                                </div>



	                                	</div>


	                                	<div class="col-span-12 lg:col-span-6">
	                                		<div>

			                                    <div>
			                                        <label for="example-text-input" class="block font-medium text-gray-700 mb-2 text-13 dark:text-zink-200">{{ data_table|get:"employ last name" }}</label>
			                                        <input class="w-full border py-1. p-2 h-9 placeholder:text-gray-700 rounded border-gray-400 placeholder:text-sm focus:border focus:border-gray-400 focus:ring-0 focus:outline-none text-gray-700 dark:bg-transparent dark:border-zink-50 dark:placeholder:text-zink-200 dark:text-zink-200" type="text"  id="employee_last_name"  name="employee_last_name" value="{{ client.employee_last_name }}" required>
			                                    </div>

			                                    <div>
			                                        <label for="example-text-input" class="block font-medium text-gray-700 mt-2 text-13 dark:text-zink-200">{{data|get:"Employee Email"}}</label>
			                                        <input class="w-full border py-2 px-3 text-13 rounded border-gray-400 placeholder:text-13 focus:border focus:border-gray-400 focus:ring-0 focus:outline-none text-gray-700 dark:bg-transparent placeholder:text-gray-600 dark:border-zink-50 dark:placeholder:text-zink-200" type="email"   value="{{ client.employee_email }}" disabled required>
			                                    </div>

                                                <input id="employee_email" type="hidden"  name="employee_email" value="{{ client.employee_email }}">

			                                    <div>
			                                        <label for="example-text-input" class="block font-medium text-gray-700 mt-2 text-13 dark:text-zink-200">{{data|get:"Phone"}}</label>
			                                        <input class="w-full border py-2 px-3 text-13 rounded border-gray-400 placeholder:text-13 focus:border focus:border-gray-400 focus:ring-0 focus:outline-none text-gray-700 dark:bg-transparent placeholder:text-gray-600 dark:border-zink-50 dark:placeholder:text-zink-200" type="text"  id="employee_phone"  name="employee_phone" value="{{ client.phone_number }}" required>
			                                    </div>

			                                    <div>
				                                    <label for="example-time-input" class="block font-medium text-gray-700 mt-2 text-13 dark:text-zink-200">{{data|get:"Active Status"}}</label>
				                                    <select class="col-span-12 py-2 sm:col-span-10 px-3 bg-white w-full border p-2 border-gray-400 rounded placeholder:text-sm focus:border focus:border-gray-400 focus:ring-0 focus:outline-none text-gray-700  dark:bg-zink-700 dark:border-zink-50 dark:text-zink-200" name="is_active" id="is_active">
				                                        <option value="1" {% if client.is_active_bool == 1 %} selected {% endif %}>{{data|get:"Active"}}</option>
				                                        <option value="0" {% if client.is_active_bool == 0 %} selected {% endif %}>{{data|get:"Deactive"}}</option>
				                                    </select>
				                                </div>
												<input type="hidden" name="user_role"  id="user_role" value="client">
                                                <input type="hidden" name="client_id"  id="client_id" value="{{ client.id }}">
												
			                                </div>



	                                	</div>


	                               </div>

	                               <div>
		                                        		<button type="submit" class=" py-2 px-3  mt-5 text-white bg-blue-500 hover:bg-blue-700 focus:ring-2 focus:ring-blue-100 font-medium rounded text-sm w-full sm:w-auto px-5 py-2.5 text-center">{{data|get:"Save Details"}}</button>
		                                    	</div>

                                </form>

                                


                            </div>
                        </div>
                        
                  
                </div>
            </div>
            <!-- container-fluid -->
        </div>
        <!-- End Page-content -->
      
        {% include 'super_admin/partials/footer.html' %}
    </div>
</div>
<!-- end main content -->
{% include 'super_admin/partials/customizer.html' %}
{% include 'super_admin/partials/vendor-scripts.html' %}
<!-- App js -->
<script src="{% static 'super_admin/assets/js/app.js' %}"></script>
<script>
    // JavaScript code for password generation
    function generatePassword() {
        // Your password generation logic here
        // For simplicity, let's generate a random 8-character password
        const password = Math.random().toString(36).slice(-14);

        // Update the input field with the generated password
        document.getElementById('employee_password').value = password;
    }

    $(document).ready(function(){
        $("#edit_user_form").submit(function(e){
            
            e.preventDefault();
            let form_data = $(this).serialize();
            $.ajax({
                method:'POST',
                url:$(this).attr('class'),
                dataType:'JSON',
                data:form_data,
                success:function(data){
                    console.log(data);
                    if (data.success == 1){
                        $("#info_selector").empty().append(`<div class="px-5 py-3 text-green-800 bg-green-100 border border-green-200 rounded-md dark:text-green-200 dark:bg-green-500/20 dark:border-green-500/20">${data.msg}</div>`);
                    }else{
                        $("#info_selector").empty().append(`<div class="px-5 py-3 text-red-800 bg-red-100 border border-red-200 rounded-md dark:border-red-500/20 dark:text-red-200 dark:bg-red-500/20" role="alert" id="error">${data.msg}</div>`);
                    }
                    setTimeout(() => {
                        $("#info_selector").empty();
                    }, 10000);
                },
            });
        });

    });
</script>
</body>
</html>